<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN" 
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping
>
    <class
        name="ch.intertec.storybook.model.hbn.entity.AbstractTagLink"
        table="TAG_LINK"
        discriminator-value="-1"
    >

        <id
            name="id"
            column="ID"
            type="java.lang.Long"
            unsaved-value="null"
        >
            <generator class="increment">
              <!--  
                  To add non XDoclet generator parameters, create a file named 
                  hibernate-generator-params-AbstractTagLink.xml 
                  containing the additional parameters and place it in your merge dir. 
              --> 
            </generator>
        </id>

        <discriminator
            column="type"
            type="integer"
        />

        <property
            name="type"
            type="java.lang.Integer"
            update="false"
            insert="false"
            column="type"
        />

        <many-to-one
            name="startScene"
            class="ch.intertec.storybook.model.hbn.entity.Scene"
            cascade="none"
            outer-join="auto"
            update="true"
            insert="true"
            column="start_scene_id"
            lazy="false"
        />

        <many-to-one
            name="endScene"
            class="ch.intertec.storybook.model.hbn.entity.Scene"
            cascade="none"
            outer-join="auto"
            update="true"
            insert="true"
            column="end_scene_id"
            lazy="false"
        />

        <many-to-one
            name="person"
            class="ch.intertec.storybook.model.hbn.entity.Person"
            cascade="none"
            outer-join="auto"
            update="true"
            insert="true"
            column="character_id"
            lazy="false"
        />

        <many-to-one
            name="location"
            class="ch.intertec.storybook.model.hbn.entity.Location"
            cascade="none"
            outer-join="auto"
            update="true"
            insert="true"
            column="location_id"
            lazy="false"
        />

        <subclass
            name="ch.intertec.storybook.model.hbn.entity.ItemLink"
            discriminator-value="1">
	        <many-to-one
	            name="item"
	            class="ch.intertec.storybook.model.hbn.entity.Item"
	            cascade="none"
	            outer-join="auto"
	            update="true"
	            insert="true"
	            column="tag_id"/>
        </subclass>
        
        <subclass
            name="ch.intertec.storybook.model.hbn.entity.TagLink"
            discriminator-value="0">
	        <many-to-one
	            name="tag"
	            class="ch.intertec.storybook.model.hbn.entity.Tag"
	            cascade="none"
	            outer-join="auto"
	            update="true"
	            insert="true"
	            column="tag_id"/>
        </subclass>

    </class>

</hibernate-mapping>
